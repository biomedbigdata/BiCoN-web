<!DOCTYPE html>
<!-- Template by Quackit.com -->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags <meta http-equiv="refresh" content="3" > -->

    <title>Quirin's Master Thesis test page</title>
    <script src="http://cdn.pydata.org/bokeh/release/bokeh-0.13.0.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="http://cdn.pydata.org/bokeh/release/bokeh-0.13.0.min.css">

    <script type="text/javascript" charset="utf8" src="http://code.jquery.com/jquery-3.3.1.js"></script>
    <!--<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.5/css/jquery.dataTables.css">-->
    <link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">

    <script type="text/javascript" charset="utf8"
            src="http://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
    <!--<script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>-->
    <!--<script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/dataTables.jqueryui.min.js"></script>-->
    <!--<script type="text/javascript" charset="utf8" src="
    https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js "></script>-->
    <script type="text/javascript" charset="utf8">
        $(document).ready(function () {
            //alert("bsfbaisdfbajsidf");

//var table = $('#ctable').removeAttr('width').DataTable( {
//      scrollY:        "550px",
//      scrollX:        false,
//      scrollCollapse: false,
//      paging:         true,
//        columnDefs: [
//            { width: '20%', targets: 0 }
//        ],
//        fixedColumns: true
//    } );
            $('#ctable').dataTable();
            $('#ctable2').dataTable();
            $('#ctable3').dataTable();
            $('#ctable4').dataTable();
            $('#ctable5').dataTable();
        });
    </script>
    {% load staticfiles %}

    <!--- sigma.js imports needed for PPI graph -->
    <script src="{% static 'src/sigma.core.js' %}"></script>
    <script src="{% static 'src/conrad.js' %}"></script>
    <script src="{% static 'src/utils/sigma.utils.js' %}"></script>
    <script src="{% static 'src/utils/sigma.polyfills.js' %}"></script>
    <script src="{% static 'src/sigma.settings.js' %}"></script>
    <script src="{% static 'src/classes/sigma.classes.dispatcher.js' %}"></script>
    <script src="{% static 'src/classes/sigma.classes.configurable.js' %}"></script>
    <script src="{% static 'src/classes/sigma.classes.graph.js' %}"></script>
    <script src="{% static 'src/classes/sigma.classes.camera.js' %}"></script>
    <script src="{% static 'src/classes/sigma.classes.quad.js' %}"></script>
    <script src="{% static 'src/classes/sigma.classes.edgequad.js' %}"></script>
    <script src="{% static 'src/captors/sigma.captors.mouse.js' %}"></script>
    <script src="{% static 'src/captors/sigma.captors.touch.js' %}"></script>
    <script src="{% static 'src/renderers/sigma.renderers.canvas.js' %}"></script>
    <script src="{% static 'src/renderers/sigma.renderers.webgl.js' %}"></script>
    <script src="{% static 'src/renderers/sigma.renderers.svg.js' %}"></script>
    <script src="{% static 'src/renderers/sigma.renderers.def.js' %}"></script>
    <script src="{% static 'src/renderers/webgl/sigma.webgl.nodes.def.js' %}"></script>
    <script src="{% static 'src/renderers/webgl/sigma.webgl.nodes.fast.js' %}"></script>
    <script src="{% static 'src/renderers/webgl/sigma.webgl.edges.def.js' %}"></script>
    <script src="{% static 'src/renderers/webgl/sigma.webgl.edges.fast.js' %}"></script>
    <script src="{% static 'src/renderers/webgl/sigma.webgl.edges.arrow.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.labels.def.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.hovers.def.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.nodes.def.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.edges.def.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.edges.curve.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.edges.arrow.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.edges.curvedArrow.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.edgehovers.def.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.edgehovers.curve.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.edgehovers.arrow.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.edgehovers.curvedArrow.js' %}"></script>
    <script src="{% static 'src/renderers/canvas/sigma.canvas.extremities.def.js' %}"></script>
    <script src="{% static 'src/renderers/svg/sigma.svg.utils.js' %}"></script>
    <script src="{% static 'src/renderers/svg/sigma.svg.nodes.def.js' %}"></script>
    <script src="{% static 'src/renderers/svg/sigma.svg.edges.def.js' %}"></script>
    <script src="{% static 'src/renderers/svg/sigma.svg.edges.curve.js' %}"></script>
    <script src="{% static 'src/renderers/svg/sigma.svg.labels.def.js' %}"></script>
    <script src="{% static 'src/renderers/svg/sigma.svg.hovers.def.js' %}"></script>
    <script src="{% static 'src/middlewares/sigma.middlewares.rescale.js' %}"></script>
    <script src="{% static 'src/middlewares/sigma.middlewares.copy.js' %}"></script>
    <script src="{% static 'src/misc/sigma.misc.animation.js' %}"></script>
    <script src="{% static 'src/misc/sigma.misc.bindEvents.js' %}"></script>
    <script src="{% static 'src/misc/sigma.misc.bindDOMEvents.js' %}"></script>
    <script src="{% static 'src/misc/sigma.misc.drawHovers.js' %}"></script>
    <script src="{% static 'shape-library.js' %}"></script>
    <script src="{% static 'sigma.renderers.customShapes.js' %}"></script>


    <!-- END SIGMA IMPORTS -->
    <script src="{% static 'plugins/sigma.parsers.json/sigma.parsers.json.js' %}"></script>


    <!-- Bootstrap Core CSS -->
    <link href="{% static 'bootstrap.min.css' %}" rel="stylesheet">

    <!-- Custom CSS: You can use this stylesheet to override any Bootstrap styles and/or apply your own styles -->
    <link href="{% static 'custom.css' %}" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style>.wrap-collabsible {
        margin-bottom: 1.2rem 0;
    }

    /* css for expandible (collapsible) input fields*/
    .lbl-toggle {
        display: block;

        font-weight: bold;
        font-family: monospace;
        font-size: 1.2rem;
        text-transform: uppercase;
        text-align: center;

        padding: 1rem;

        color: #000000;
        background: #FFFFFF;

        cursor: pointer;

        border-radius: 7px;
        transition: all 0.25s ease-out;
    }

    .lbl-toggle:hover {
        color: #000000;
    }

    .lbl-toggle::before {
        content: ' ';
        display: inline-block;

        border-top: 5px solid transparent;
        border-bottom: 5px solid transparent;
        border-left: 5px solid currentColor;
        vertical-align: middle;
        margin-right: .7rem;
        transform: translateY(-2px);

        transition: transform .2s ease-out;
    }

    .toggle:checked + .lbl-toggle::before {
        transform: rotate(90deg) translateX(-3px);
    }

    .collapsible-content {
        max-height: 0px;
        overflow: hidden;
        transition: max-height .25s ease-in-out;
    }

    .toggle:checked + .lbl-toggle + .collapsible-content {
        max-height: 350px;
    }

    .toggle:checked + .lbl-toggle {
        border-bottom-right-radius: 0;
        border-bottom-left-radius: 0;
    }

    .collapsible-content .content-inner {
        /*background: rgba(250, 224, 66, .2);*/
        background: rgba(255, 255, 255, .2);
        border-bottom: 1px solid rgba(255, 255, 255, .2);
        border-bottom-left-radius: 7px;
        border-bottom-right-radius: 7px;
        padding: .5rem 1rem;
    }

    .message_1 {
        display: none;
    }

    /* tables */
    table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        /*width: 100%;*/
        min-width: 500px;
    }

    /* entries of enrichment-result tables */
    table.dataTable {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
        table-layout: fixed;
        word-wrap: break-word;
        overflow: scroll;
    }

    td, th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }

    tr:nth-child(even) {
        background-color: #dddddd;
    }

    /* the collapsible input area */
    .collapsible {
        background-color: #eee;
        color: #444;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 15px;
    }

    .active, .collapsible:hover {
        background-color: #ccc;
    }

    .content {
        padding: 0 18px;
        display: none;
        overflow: hidden;
        background-color: #f1f1f1;
    }

    /*buttons in input form*/
    .tab button {
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        width: 150px;
    }

    .tab button:hover {
        background-color: #ddd;
    }

    .tab button.active {
        background-color: #ccc;
    }

    .tab4 {
        display: none;
    }

    /* steps for multi-step input form */
    .step {
        border: solid 0px #d3d3d3;
        width: 100px;
        height: 70px;
        background-color: #d3d3d3;
        display: inline-block;
    }

    .step a {
        color: #000000;
    }

    .step2 {
        border: solid 0px #d3d3d3;
        width: 100px;
        height: 70px;
        background-color: #d3d3d3;
        display: none;
        float: left;
    }

    .step2 a {
        color: #000000;
    }

    .step3 {
        height: 50px;
        width: 50px;
        margin: 0 2px;
        background-color: #bbbbbb;
        border: none;
        border-radius: 50%;
        display: inline-block;
        opacity: 0.5;
    }

    /* Mark the active step: */
    .step.active {
        background-color: #787878;
        opacity: 1;
    }

    /* clickable links in active steps*/
    .step.active a {
        color: #D8D8D8;
    }

    /* Mark the steps that are finished and valid: */
    .step.finish {
        /*background-color: #4CAF50;*/
        color: #D8D8D8;
        background-color: #404040;
    }


    .step.finish a {
        color: #D8D8D8;
    }

    /* result tabs */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }

    .tabcontent3 {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }

    #ctable {
        width: 500px;
    }

    /* input tabs */
    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
        display: block;
        float: left;
        clear: both;
    }

    .tab-content {
        background-color: #FFFFFF;
    }

    .paging-nav {
        text-align: right;
        padding-top: 2px;
    }

    .paging-nav a {
        text-decoration: none;
        margin: auto 1px;
        display: inline-block;
        padding: 1px 7px;
        background: #91b9e6;
        color: white;
        border-radius: 3px;
    }

    .paging-nav .selected-page {
        background: #187ed5;
        font-weight: bold;
    }
    </style>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
</head>

<body>
<div id="container">
    <style>
        /* the container with the PPI graph */
        #graph-container {
            width: 1000px;
            height: 600px;
            margin: auto;
            top: 100;
            bottom: 100;
            left: 100;
            right: 100;
            position:
        }

        #graph-container-2 {
            width: 1150px;
            height: 600px;
            margin: auto;
            border: 1px solid black;
            top: 100;
            bottom: 100;
            left: 100;
            right: 100;
            position:
        }
    </style>

</div>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <!-- Logo and responsive toggle -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">
                Quirin's Master Thesis
            </a>
        </div>
        <!-- Navbar links -->
        <div class="collapse navbar-collapse" id="navbar">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="#">Home</a>
                </li>
                <li>
                    <a href="infopage.html">How to</a>
                </li>

                <li>
                    <a href="sources.html">Sources</a>
                </li>
                <li>
                    <a href="#">Analysis</a>
                </li>
                <li>
                    <a>Logged in?</a>
                    {% if user.is_authenticated %}
                        User: {{ user.get_username }}
                        <form action="logout.html" method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                            <input type="submit" value="Logout"/>
                        </form>
                    {% else %}
                        <a href="login.html">Login</a>
                    {% endif %}
                </li>
                <li>
                    <a href="signup.html">Sign up</a>
                </li>
                {% if user.is_authenticated %}
                    <li>
                        <a href="delete_user.html">Delete user account</a>
                    </li>
                {% endif %}
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div class="jumbotron feature">
    <div class="container">
        <h1> Quirin's Master Thesis Test Page</h1>
        <p>Vizualise Gene Expression and PPI data. </p>
    </div>
</div>

<!-- Content -->
<div class="container">

    <a name="Content"></a>
    <!-- Heading -->

    <form action="polls/clustering_6_part_1.html" name="myForm2" method="post"
          enctype="multipart/form-data"> {% csrf_token %}
        <input type="hidden" id="newAnalysis" name="newAnalysis" value="newAnalysis">
        <!---<a name="Content"></a><button type="button" style="display:inline;" onclick="location.href='polls/clustering_6_part_1.html';" id="start_new_analysis_button"><br><b>Start a new analysis</b><br><br></button>--->
        <button type="submit" style="display:inline;" id="start_new_analysis_button"><br><b>Start a new analysis</b><br><br>
        </button>
        <!---<button type="submit" style="display:inline;" onclick="location.href='polls/clustering_6_part_1.html';" id="start_new_analysis_button"><br><b>Start a new analysis</b><br><br></button>-->
        <!---<input type="submit" value="Start a new Analysis" />-->
    </form>
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Analysis
                <small>Gene Expression & PPI</small>
            </h1>

        </div>
    </div>
    <!--- wrapper divs are used for a stable display of the page layout when resizing browser window --->
    <div id="wrapper_div_2" style="float:left;min-width:1200px"> <!--- overall wrapper div -->

    </div> <!--- wrapper div 4 -->

    <!--- openTab is for choosing and displaying result tabs --->
    <div id="results" style="clear:both;">
        <!--- this generates the box where result tabs can be selected --->
        <div class="tab" style="position:relative;left:15%;z-index:10;">
            <button class="tablinks" onclick="openTab2(event, 'ppi')">PPI Graph</button>
            <button class="tablinks" onclick="openTab(event, 'heatmap')">Heatmap</button>
            <button class="tablinks" onclick="openTab(event, 'survival')">Survival Data</button>
            <button class="tablinks" onclick="openTab(event, 'patient_metadata')">Patient Information</button>
            <button class="tablinks" onclick="openTab(event, 'convergence')">Convergence</button>
            <button class="tablinks" onclick="openTab(event, 'kegg_enrichment')">Enrichment</button>
        </div>

        <!--- class tabcontent is invisible per default, it only gets visible after clicking its label -->
        <!--- enrichment_open is a parameter that is passed to the template after the user has run an enrichment analysis, so that the enrichment tab will be open then by default -->

        <!--- hide ppi (which is open by default) if enrichment was run -->
        <div id="result_tabs" style="position:relative;left:15%">
            {% if enrichment_open %}
                <div class="tabcontent" id="ppi">
            {% else %}
                <div class="row" id="ppi">
            {% endif %}
            <article class="col-md-12 article-intro">

                <h1>PPI Graph</h1>
                <h3>
                    <a href="#">Visualize Protein-Protein Interactions</a>
                </h3>
                <!---{{json_path}}--->


                {% load staticfiles %}
                <!--- here the PPI graph is displayed --->
                <!---<div id="graph-container" style="display: block;float:left"><img src={% static 'legend.png' %} width="132" height="218" style="position:absolute"> </div>--->
                <div id="graph-container-2" style="display: block;float:left">
                    <div id="legend_div" style="float:left"><img src={% static 'legend.png' %} width="132" height="218"
                                                                 style="display:block"><img
                            src={% static 'ppi_cluster_legend.png' %} style="position:absolute;left:20px;top:650px">
                    </div>
                    <div id="graph-container" style="display: block;float:left"></div>

                    <div id="div-for-newline" style="clear:both">
                        <p>In the above graph, interactions between analysed genes are shown. The color corresponds to
                            the mean difference in expression level between both groups.</p>
                        <!--- display the files for downloading --->
                        {% if user.is_authenticated %}
                            <br><br><b>
                            Download the network
                            <a href={% static network_path %} download> as png </a> or
                            <a href={% static json_path %} download> as json file </a>
                        </b>
                        {% else %}
                            <b>
                                Download the network
                                <a href={% static network_path %} download> as png </a> or
                                <a href={% static json_path %} download> as json file </a>
                            </b>
                        {% endif %}
                        <br><br><br><br>
                    </div>
            </article>

            </div>
            <!--- tab for heatmap --->
            <div class="tabcontent" id="heatmap">

                <article class="col-md-12 article-intro">

                    <h1>Heatmap</h1>
                    {% load staticfiles %}


                    <img src={% static path_heatmap %}>
                    <h3>
                        <a href="#">Heatmap</a>
                    </h3>
                    <p>The heatmap shows a clustering of the analysed genes. The colored bar next to the heatmap shows
                        to which group the patient belongs. The colored bar above the heatmap shows to which group the
                        gene belongs.</p>

                    <br><br>

                </article>
            </div>
            <!--- this </div> was new --->


            {% load staticfiles %}
            <!--- tab for survival plot --->
            <div class="tabcontent" id="survival">
                <article class="col-md-12 article-intro">
                    <h1>Survival Information</h1>
                    <!--- load the survival graph --->
                    {{ output_plot_path_2 }}
                    <object type="text/html" data="{% static output_plot_path %}" width="800" height="500"></object>
                    <br>
                    <img src={% static 'legend_1.png' %} style="position:absolute"><br><br>
                    <h3>
                        <a href="#">Survival of patients</a>
                    </h3>
                    {% if output_plot_path == "empty" %}

                    {% else %}
                        <p>In the above graph, survival time for patients of both groups is shown (Fractions of patients
                            in the respective group that are alive at time X).</p>
                        {% if pval is None %}
                            <!---<object type="text/html" data="{% static 'pvalue.txt' %}" width="400" height="100"></object>--->
                        {% else %}
                            The log-rank test gives a p-value of: {{ pval }}
                        {% endif %}
                    {% endif %}
                </article>
            </div>
            <!--- tab for metadata --->
            <div class="tabcontent" id="patient_metadata">
                <article class="col-md-12 article-intro">
                    <h1>Patient Data</h1>
                    {% if not ret_metadata1 %}
                    {% else %}
                        <h3>
                            <a href="#">Metadata of patients</a>
                        </h3>
                        <p>In the below table, the Jaccard Index of correlation between patient clusters (output by the
                            algorithm) and clinical events (e.g. metastasis) is shown. (E.g., which fraction of patients
                            in Cluster 1 has a lung metastasis).</p>


                        <table style="max-width:1200px;">
                            <tr>
                                <!--- iterate over tables of metadata and display as table--->
                                <th style="width:200px;">Group</th>
                                {% for key,value in ret_metadata1.items %}
                                    <th> {{ value }} </th>
                                {% endfor %}
                            </tr>
                            <tr>
                                <th style="width:200px;">Group 1</th>
                                {% for key,value in ret_metadata2.items %}
                                    <th> {{ value }}</th>
                                {% endfor %}
                            </tr>

                            <tr>
                                <th style="width:200px;">Group 2</th>
                                {% for key,value in ret_metadata3.items %}
                                    <th>{{ value }}</th>
                                {% endfor %}
                            </tr>
                        </table>
                    {% endif %}
                </article>
            </div>
            <!--- tab for convergence plot --->
            <div class="tabcontent" id="convergence">
                <article class="col-md-12 article-intro">
                    <h1>Convergence Behaviour</h1>

                    <h3>
                        <a href="#">Algorithm Convergence</a>
                    </h3>

                    {% load staticfiles %}
                    <img src={% static conv_file %} width ="500" height ="500" onerror="this.style.display = 'none'" >

                    <p>Convergence behaviour of the algorithm.</p>
                </article>


            </div>
            <!--- this </div> was new --->
            <!---</div>--->
            <!--- tab for enrichment --->

            <!--- tab for enrichment --->
            {% if enrichment_open %}
                <div class="row" id="kegg_enrichment">
            {% else %}
                <div class="tabcontent" id="kegg_enrichment">
            {% endif %}
            <article class="col-md-12 article-intro">
                <h1>Enrichment</h1>
                <h3>
                </h3>
                <p></p><br>
                Run an Enrichment for the genes used in the analysis. Select for which terms you want to run the
                enrichment and display the results for genes either in both clusters, in cluster 1 or in cluster
                2.<br><br>
                <!--- form for enrichment analysis --->
                <form action="#" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <b>Run Enrichment:</b><br>
                    <select name="enrichment_type" id="enrichment_type" size="1">
                        <option value="kegg_enrichment" selected="selected">KEGG</option>
                        <option value="go_enrichment" selected="selected">GO Biological Process</option>
                        <option value="go_molecular" selected="selected">GO Molecular Function</option>
                        <option value="reactome_enrichment" selected="selected">Reactome</option>
                    </select>
                    <br>P-value cutoff:
                    <select name="pval_enr" size="1">
                        <option value="0.01">0.01</option>
                        <option value="0.05">0.05</option>
                        <option value="0.10">0.1</option>
                        <option value="0.20">0.2</option>
                        <option value="0.50" selected="selected">0.5</option>
                    </select>
                    <input type="submit" value="Submit"/>
                </form>

                <!--- enrichment results ---->
                <br><br>Show Enrichment for Genes of:<br>
                <ul class="nav nav-tabs">
                    <!--- select gene cluster to show enrichment for--->
                    <li class="active"><a data-toggle="tab" href="#home">Both Groups</a></li>
                    <li><a data-toggle="tab" href="#menu1">Group 1</a></li>
                    <li><a data-toggle="tab" href="#menu2">Group 2</a></li>
                    <li><a data-toggle="tab" href="#menu3">Only in Group 1</a></li>
                    <li><a data-toggle="tab" href="#menu4">Only in Group 2</a></li>
                </ul>


                <!--- results of the enrichment analysis --->
                <!--- both groups --->
                <div class="tab-content">
                    <div id="home" class="tab-pane fade in active" style="background-color: #FFFFFF;width:1200px">
                        <h3>Both Groups</h3>
                        <p>
                        <table id="ctable" class="display" style="width: 1200px;">
                            <!--- generate table with results from enrichment --->
                            <thead>
                            <tr>
                                <th>Gene_set</th>
                                <th>Term</th>
                                <th>Overlap</th>
                                <th>P-value</th>
                                <th>Adjusted P-Value</th>
                                <th>Genes</th>
                            </tr>
                            </thead>

                            <tbody>
                            {% for element in enrichment_dict %}
                                <tr>
                                    {% for key,value in element.items %}
                                        <th>
                                            <div style="height:80px; overflow:scroll"> {{ value }} </div>
                                        </th>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                            </tbody>

                        </table>
                        </p>
                    </div>
                    <!--- group 1 --->
                    <div id="menu1" class="tab-pane fade" style="background-color: #FFFFFF;width:1200px">
                        <h3>Group 1</h3>
                        <p>
                        <table id="ctable2" class="display" style="width: 1200px;">

                            <thead>
                            <tr>
                                <th>Gene_set</th>
                                <th>Term</th>
                                <th>Overlap</th>
                                <th>P-value</th>
                                <th>Adjusted P-Value</th>
                                <th>Genes</th>
                            </tr>
                            </thead>

                            <tbody>
                            {% for element in enrichment_dict_2 %}
                                <tr>
                                    {% for key,value in element.items %}
                                        <th> {{ value }} </th>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                        </p>
                    </div>


                    <!--- group 2 --->
                    <div id="menu2" class="tab-pane fade" style="background-color: #FFFFFF;width: 1200px;">
                        <h3>Group 2</h3>
                        <p>
                        <table id="ctable3" class="display" style="width: 1200px;">

                            <thead>
                            <tr>
                                <th>Gene_set</th>
                                <th>Term</th>
                                <th>Overlap</th>
                                <th>P-value</th>
                                <th>Adjusted P-Value</th>
                                <th>Genes</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for element in enrichment_dict_3 %}
                                <tr>
                                    {% for key,value in element.items %}
                                        <th> {{ value }} </th>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                            </tbody>

                        </table>
                        </p>
                    </div>

                    <!--- group 1 only --->
                    <div id="menu3" class="tab-pane fade" style="background-color: #FFFFFF;width: 1200px;">
                        <h3>Only in Group 1</h3>
                        <p>
                        <table id="ctable4" class="display" style="width: 1200px;">

                            <thead>
                            <tr>
                                <th>Gene_set</th>
                                <th>Term</th>
                                <th>Overlap</th>
                                <th>P-value</th>
                                <th>Adjusted P-Value</th>
                                <th>Genes</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for element in enrichment_dict_4 %}
                                <tr>
                                    {% for key,value in element.items %}
                                        <th> {{ value }} </th>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                            </tbody>

                        </table>
                        </p>
                    </div>

                    <!--- group 2 only --->
                    <div id="menu4" class="tab-pane fade" style="background-color: #FFFFFF;width: 1200px;">
                        <h3>Only in Group 2</h3>
                        <p>
                        <table id="ctable5" class="display" style="width: 1200px;">

                            <thead>
                            <tr>
                                <th>Gene_set</th>
                                <th>Term</th>
                                <th>Overlap</th>
                                <th>P-value</th>
                                <th>Adjusted P-Value</th>
                                <th>Genes</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for element in enrichment_dict_5 %}
                                <tr>
                                    {% for key,value in element.items %}
                                        <th> {{ value }} </th>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                            </tbody>

                        </table>
                        </p>
                    </div>
            </article>
            <!--- end of enrichment results --->
            <!--- this </div> was new --->
            </div>
            </div><!--- tab content ---><!--- end kegg enrichment -->
            <div id="div_for_new_analysis">
                <br><br>
                <form action="polls/clustering_6_part_1.html" name="myForm2" method="post"
                      enctype="multipart/form-data"> {% csrf_token %}
                    <input type="hidden" id="newAnalysis" name="newAnalysis" value="newAnalysis">
                    <!---<a name="Content"></a><button type="button" style="display:inline;" onclick="location.href='polls/clustering_6_part_1.html';" id="start_new_analysis_button"><br><b>Start a new analysis</b><br><br></button>--->
                    <button type="submit" style="display:inline;" id="start_new_analysis_button"><br><b>Start a new
                        analysis</b><br><br></button>
                    <!---<button type="submit" style="display:inline;" onclick="location.href='polls/clustering_6_part_1.html';" id="start_new_analysis_button"><br><b>Start a new analysis</b><br><br></button>-->
                    <!---<input type="submit" value="Start a new Analysis" />-->
                </form>
            </div>
            </div>


        </div><!--- results --->
    </div><!--- overall wrapper div--->
    <!-- /.row -->

</div>
</div>
</div>
<!-- /.container -->

</div>
</div>
</div>

<script type="text/javascript"> <![CDATA[
function loading() {
    $("#loading").show();
}

]]></script>
{% load staticfiles %}

{% if enrichment_open %}
    <script>var js_enrichment_open = true; </script>
{% else %}
    <script>var js_enrichment_open = false; </script>
{% endif %}

<script>

    // function for displaying the content of result tabs after clicking its label
    // cityName is the name of the tab
    function openTab(evt, tabName) {

        if (js_enrichment_open === true) {
            document.getElementById('kegg_enrichment').style.display = "none";
        }
        // Declare all variables
        var i, tabcontent, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        // hide the PPI tab that is active by default after loading
        document.getElementById('ppi').style.display = "none";
        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    function openTab2(evt, tabName) {
// almost the same as openTab, used for displaying the PPI tab. A different function is needed because the PPI tab must not be hidden in this function
        // Declare all variables
        var i, tabcontent, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById('ppi').style.display = "block";
        document.getElementById('kegg_enrichment').style.display = "none";
        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(tabName).style.display = "block";
        // trigger window resize event (needed for sigma.js to display anything after it has been hidden)
        evt.currentTarget.className += " active";
        window.dispatchEvent(new Event('resize'));
        var element1 = document.getElementById("graph-container");
        if (element1.style.height == "600px") {
            element1.style.height = "599px";
        } else {
            element1.style.height = "600px";
        }
        // refresh sigma.js (needed to display graph after it has been hidden)
        var s = sigma.instances()[0];
        s.refresh();

    }

    function openTab3(evt, tabName) {
        // Declare all variables
        var i, tabcontent, tabcontent2, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent2 = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent2.length; i++) {
            tabcontent2[i].style.display = "none";
        }

        //Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById('ppi').style.display = "none";
        document.getElementById('kegg_enrichment').style.display = "block";
        //Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }
</script><!-- script for generation of PPI graph--->
<script>

    sigma.utils.pkg('sigma.canvas.nodes');
    /**
     * The plugin sigma.parsers.gexf can load and parse the GEXF graph file,
     * and instantiate sigma when the graph is received.
     *
     * The object given as the second parameter is the base of the instance
     * configuration object. The plugin will just add the "graph" key to it
     * before the instanciation.
     */
    // define neighbors method used for highlighting clicked node
    sigma.classes.graph.addMethod('neighbors', function (nodeId) {
        var k,
            neighbors = {},
            index = this.allNeighborsIndex[nodeId] || {};

        for (k in index)
            neighbors[k] = this.nodesIndex[k];

        return neighbors;
    });

    // in this script, the PPI graph is generated from the json file
    sigma.parsers.json('{% static ""%}/{{json_path}}', {
            container: 'graph-container', renderer: {
                type: 'canvas',
                container: 'graph-container'
                // sideMargin is to avoid PPI graph to extend its frame
            },
            settings: {sideMargin: 0.25}
        },
        function (s) {
            // We first need to save the original colors of our
            // nodes and edges, like this:
            s.graph.nodes().forEach(function (n) {
                n.originalColor = n.color;
            });
            s.graph.edges().forEach(function (e) {
                e.originalColor = e.color;
            });
            s.bind('clickNode', function (e) {
                var nodeId = e.data.node.id,
                    toKeep = s.graph.neighbors(nodeId);
                toKeep[nodeId] = e.data.node;

                s.graph.nodes().forEach(function (n) {
                    if (toKeep[n.id])
                        n.color = n.originalColor;
                    else
                        n.color = '#eee';
                });

                s.graph.edges().forEach(function (e) {
                    if (toKeep[e.source] && toKeep[e.target])
                        e.color = e.originalColor;
                    else
                        e.color = '#eee';
                });

                // Since the data has been modified, we need to
                // call the refresh method to make the colors
                // update effective.
                s.refresh();
            });

            // When the stage is clicked, we just color each
            // node and edge with its original color.
            s.bind('clickStage', function (e) {
                s.graph.nodes().forEach(function (n) {
                    n.color = n.originalColor;
                });

                s.graph.edges().forEach(function (e) {
                    e.color = e.originalColor;
                });

                // Same as in the previous event:
                s.refresh();
            });
        });
    // refresh graph (needed to have it displayed)
    CustomShapes.init(s);
    s.refresh();
</script>
</body>
<footer style="clear:both">
    <div class="footer-blurb" style="display:none">
        <div class="container">

        </div>
    </div>

    <div class="small-print" style="clear:both">
        <div class="container">
        </div>
    </div>
</footer>


<!-- Bootstrap Core JavaScript -->
<script src="{% static 'bootstrap.min.js' %}"></script>

<!-- IE10 viewport bug workaround -->
<script src="{% static 'ie10-viewport-bug-workaround.js' %}"></script>

<!-- Placeholder Images -->
<script src="{% static 'holder.min.js' %}"></script>


</html>



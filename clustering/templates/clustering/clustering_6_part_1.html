<!DOCTYPE html>
<!-- Template by Quackit.com -->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags <meta http-equiv="refresh" content="3" > -->

    <title>Quirin's Master Thesis test page</title>
    <script src="http://cdn.pydata.org/bokeh/release/bokeh-0.13.0.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="http://cdn.pydata.org/bokeh/release/bokeh-0.13.0.min.css">

<script type="text/javascript" charset="utf8" src="http://code.jquery.com/jquery-3.3.1.js"></script>
<!--<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.5/css/jquery.dataTables.css">-->
<link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
 
<script type="text/javascript" charset="utf8" src="http://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
<!--<script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>-->
<!--<script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/dataTables.jqueryui.min.js"></script>-->
<!--<script type="text/javascript" charset="utf8" src="
https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js "></script>-->
<script type="text/javascript" charset="utf8">
$(document).ready(function() {
    //alert("bsfbaisdfbajsidf");

//var table = $('#ctable').removeAttr('width').DataTable( {
//      scrollY:        "550px",
//      scrollX:        false,
//      scrollCollapse: false,
//      paging:         true,
//        columnDefs: [
//            { width: '20%', targets: 0 }
//        ],
//        fixedColumns: true
//    } );
    $('#ctable').dataTable();
    $('#ctable2').dataTable();
    $('#ctable3').dataTable();
    $('#ctable4').dataTable();
    $('#ctable5').dataTable();
} );
</script>
       {% load staticfiles %}

<!--- sigma.js imports needed for PPI graph -->
<script src="{% static 'src/sigma.core.js' %}"></script>
<script src="{% static 'src/conrad.js' %}"></script>
<script src="{% static 'src/utils/sigma.utils.js' %}"></script>
<script src="{% static 'src/utils/sigma.polyfills.js' %}"></script>
<script src="{% static 'src/sigma.settings.js' %}"></script>
<script src="{% static 'src/classes/sigma.classes.dispatcher.js' %}"></script>
<script src="{% static 'src/classes/sigma.classes.configurable.js' %}"></script>
<script src="{% static 'src/classes/sigma.classes.graph.js' %}"></script>
<script src="{% static 'src/classes/sigma.classes.camera.js' %}"></script>
<script src="{% static 'src/classes/sigma.classes.quad.js' %}"></script>
<script src="{% static 'src/classes/sigma.classes.edgequad.js' %}"></script>
<script src="{% static 'src/captors/sigma.captors.mouse.js' %}"></script>
<script src="{% static 'src/captors/sigma.captors.touch.js' %}"></script>
<script src="{% static 'src/renderers/sigma.renderers.canvas.js' %}"></script>
<script src="{% static 'src/renderers/sigma.renderers.webgl.js' %}"></script>
<script src="{% static 'src/renderers/sigma.renderers.svg.js' %}"></script>
<script src="{% static 'src/renderers/sigma.renderers.def.js' %}"></script>
<script src="{% static 'src/renderers/webgl/sigma.webgl.nodes.def.js' %}"></script>
<script src="{% static 'src/renderers/webgl/sigma.webgl.nodes.fast.js' %}"></script>
<script src="{% static 'src/renderers/webgl/sigma.webgl.edges.def.js' %}"></script>
<script src="{% static 'src/renderers/webgl/sigma.webgl.edges.fast.js' %}"></script>
<script src="{% static 'src/renderers/webgl/sigma.webgl.edges.arrow.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.labels.def.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.hovers.def.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.nodes.def.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.edges.def.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.edges.curve.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.edges.arrow.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.edges.curvedArrow.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.edgehovers.def.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.edgehovers.curve.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.edgehovers.arrow.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.edgehovers.curvedArrow.js' %}"></script>
<script src="{% static 'src/renderers/canvas/sigma.canvas.extremities.def.js' %}"></script>
<script src="{% static 'src/renderers/svg/sigma.svg.utils.js' %}"></script>
<script src="{% static 'src/renderers/svg/sigma.svg.nodes.def.js' %}"></script>
<script src="{% static 'src/renderers/svg/sigma.svg.edges.def.js' %}"></script>
<script src="{% static 'src/renderers/svg/sigma.svg.edges.curve.js' %}"></script>
<script src="{% static 'src/renderers/svg/sigma.svg.labels.def.js' %}"></script>
<script src="{% static 'src/renderers/svg/sigma.svg.hovers.def.js' %}"></script>
<script src="{% static 'src/middlewares/sigma.middlewares.rescale.js' %}"></script>
<script src="{% static 'src/middlewares/sigma.middlewares.copy.js' %}"></script>
<script src="{% static 'src/misc/sigma.misc.animation.js' %}"></script>
<script src="{% static 'src/misc/sigma.misc.bindEvents.js' %}"></script>
<script src="{% static 'src/misc/sigma.misc.bindDOMEvents.js' %}"></script>
<script src="{% static 'src/misc/sigma.misc.drawHovers.js' %}"></script>
<script src="{% static 'shape-library.js' %}"></script>
<script src="{% static 'sigma.renderers.customShapes.js' %}"></script>


     

<!-- END SIGMA IMPORTS -->
<script src="{% static 'plugins/sigma.parsers.json/sigma.parsers.json.js' %}"></script>


    <!-- Bootstrap Core CSS -->
    <link href="{% static 'bootstrap.min.css'%}" rel="stylesheet">

    <!-- Custom CSS: You can use this stylesheet to override any Bootstrap styles and/or apply your own styles -->
    <link href="{% static 'custom.css'%}" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

<style>.wrap-collabsible {
  margin-bottom: 1.2rem 0;
}

/* css for expandible (collapsible) input fields*/
.lbl-toggle {
  display: block;

  font-weight: bold;
  font-family: monospace;
  font-size: 1.2rem;
  text-transform: uppercase;
  text-align: center;

  padding: 1rem;

  color: #000000;
  background: #FFFFFF;

  cursor: pointer;

  border-radius: 7px;
  transition: all 0.25s ease-out;
}

.lbl-toggle:hover {
  color: #000000;
}

.lbl-toggle::before {
  content: ' ';
  display: inline-block;

  border-top: 5px solid transparent;
  border-bottom: 5px solid transparent;
  border-left: 5px solid currentColor;
  vertical-align: middle;
  margin-right: .7rem;
  transform: translateY(-2px);

  transition: transform .2s ease-out;
}

.toggle:checked + .lbl-toggle::before {
  transform: rotate(90deg) translateX(-3px);
}

.collapsible-content {
  max-height: 0px;
  overflow: hidden;
  transition: max-height .25s ease-in-out;
}

.toggle:checked + .lbl-toggle + .collapsible-content {
  max-height: 350px;
}

.toggle:checked + .lbl-toggle {
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
}

.collapsible-content .content-inner {
  /*background: rgba(250, 224, 66, .2);*/
  background: rgba(255, 255, 255, .2);
  border-bottom: 1px solid rgba(255, 255, 255, .2);
  border-bottom-left-radius: 7px;
  border-bottom-right-radius: 7px;
  padding: .5rem 1rem;
}
.message_1 {
    display:none;
}
/* tables */
table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    /*width: 100%;*/
    min-width: 500px;
}
/* entries of enrichment-result tables */
table.dataTable {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 100%;
    table-layout: fixed;
    word-wrap: break-word;
    overflow: scroll;
}

td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
}

tr:nth-child(even) {
    background-color: #dddddd;
}
/* the collapsible input area */
.collapsible {
  background-color: #eee;
  color: #444;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
}
.active, .collapsible:hover {
  background-color: #ccc;
}
.content {
  padding: 0 18px;
  display: none;
  overflow: hidden;
  background-color: #f1f1f1;
}
/*buttons in input form*/ 
.tab button {
    background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
    width: 150px;
}
.tab button:hover {
    background-color: #ddd;
}
.tab button.active {
    background-color: #ccc;
}
.tab4 {
  display: none;
}
/* steps for multi-step input form */
.step {
  border: solid 0px #d3d3d3;
  width: 100px;
  height: 70px;
  background-color: #d3d3d3;
  display: inline-block;
}

.step a{
    color:#000000;
}
.step2 {
  border: solid 0px #d3d3d3;
  width: 100px;
  height: 70px;
  background-color: #d3d3d3;
  display: none;
  float: left;
}
.step2 a{
    color:#000000;
}
.step3 {
  height: 50px;
  width: 50px;
  margin: 0 2px;
  background-color: #bbbbbb;
  border: none;
  border-radius: 50%;
  display: inline-block;
  opacity: 0.5;
}

/* Mark the active step: */
.step.active {
  background-color: #787878;
  opacity: 1;
}

/* clickable links in active steps*/
.step.active a{
    color:#D8D8D8;
}
/* Mark the steps that are finished and valid: */
.step.finish {
  /*background-color: #4CAF50;*/
  color: #D8D8D8;
  background-color: #404040;
}


.step.finish a{
    color:#D8D8D8;
}

/* result tabs */
.tabcontent {
    display: none;
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-top: none;
}
.tabcontent3 {
    display: none;
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-top: none;
}
#ctable{
width:500px;}
/* input tabs */
.tab {
    overflow: hidden;
    border: 1px solid #ccc;
    background-color: #f1f1f1;
    display: block;
    float: left;
    clear: both;
}
.tab-content{
    background-color: #FFFFFF;
}
.paging-nav {
  text-align: right;
  padding-top: 2px;
}
.paging-nav a {
  text-decoration: none;
  margin: auto 1px;
  display: inline-block;
  padding: 1px 7px;
  background: #91b9e6;
  color: white;
  border-radius: 3px;
}
.paging-nav .selected-page {
  background: #187ed5;
  font-weight: bold;
}
</style>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
</head>

<body>
<div id="container">
  <style>
   /* the container with the PPI graph */
    #graph-container {
	width: 1000px;
    height: 600px;
    margin: auto;
border:1px solid black;
      top: 100;
      bottom: 100;
      left: 100;
      right: 100;
      position:
    }
   </style>
		
</div>
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Logo and responsive toggle -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">
                	Quirin's Master Thesis
                </a>
            </div>
            <!-- Navbar links -->
            <div class="collapse navbar-collapse" id="navbar">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="#">Home</a>
                    </li>
                     <li>
                        <a href="infopage.html">How to</a>
                    </li>
			<li>
                        <a href="#">Analysis</a>
                    </li>
                    <li>
                        <a>Logged in?</a>
			{% if user.is_authenticated %}
    			User: {{ user.get_username }}
			<form action="logout.html" method="post" enctype="multipart/form-data">
              	  	{% csrf_token %}
                	<input type="submit" value="Logout"/>
			</form>
   			{% else %}
			<a href="login.html">Login</a>
   			{% endif %} 
                    </li><li>
			<a href="signup.html">Sign up</a>
		    </li>
			{% if user.is_authenticated %}
			<li>
			<a href="delete_user.html">Delete user account</a>
		    </li>
			{% endif %}
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

	<div class="jumbotron feature">
		<div class="container">
			<h1> Quirin's Master Thesis Test Page</h1>
			<p>Vizualise Gene Expression and PPI data. </p>
		</div>
	</div>

    <!-- Content -->
    <div class="container">

<a name="Content"></a>
        <!-- Heading -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Analysis
                    <small>Gene Expression & PPI</small>
                </h1>
                
            </div>
        </div>    
	<!--- wrapper divs are used for a stable display of the page layout when resizing browser window --->
	<div id="wrapper_div_2" style="float:left;min-width:1200px"> <!--- overall wrapper div -->
	<div id="input_div_2" style="float:left; display:inline-block;"> <!--- wrapper input div --->
	<div id="wrapper_div_3" style="float:left; display: inline-block;">
	<div id="wrapper_div_4" style="float:left; display: inline-block;">
	<div style="padding:40px;margin:40px;border:1px solid #ccc" style="float:left;display:inline;height:420px;width=50%;" id="input_data_div">
        <h1>Run Algorithm:</h1>
	<a href="infopage.html"  target="_blank" style="font-size:25px">How to</a><br><br>
		<form action="#" name="myForm" method="post" enctype="multipart/form-data" onsubmit="return checkInp()">
                {% csrf_token %}

	<!--- buttons for the start page --->
	<div class="tab4" style="width:200px; height:300px" id="start_new_analysis">
	<!--- this button opens the standard, 5-step input form--->
	<button type="button" onclick="showTab2(1)" id="start_new_analysis_button" style="height:100px;width:180px; "><h3>Start new analysis</h3></button>
	<div class="divider" style="height:5px"/>
	<!--- this button opens the one-step form for displaying old data --->
	{% if user.is_authenticated %}
	<button type="button" onclick="showOldAnalysisTab()" id="show_old_analysis_button" style="height:100px;width:180px;"><h3>Show old results</h3></button>
	{% endif %}
	</div>
	<!--- tab for selecting old data to display --->
	<div class="tab6" style="width:500px; height:300px; display:none" id="display_old_data">
	<label for="display_old_results"><input type="checkbox" name="display_old_results" value="display_old_results" id="display_old_results">Display old results</label>
		<br><br><h3>Use own uploaded files:</h3>
	<select name="input_own_file" size="1"style="width:500px">	
		{% for filename in list_of_files %}
	        <option value="{{filename.f2}}">File(s) from: {{filename.f1}}</option>
		{% endfor %}
       	</select><br>	
	</div>
	<!--- start of multi-step input form --->
	<!--- upload expression data (step 1) --->
	<div class="tab4" style="width:500px; height:300px" id="expr_upload">
	<b>Upload expression data:    </b><br>

	<input class="input" id="myfile_input" type="file" name="myfile" style="float:left">
	{% if user.is_authenticated %}
    	<label for="save_data"><input type="checkbox" name="save_data" value="save_data" id="save_data">  Save data</label>	
   	{% endif %}
	<br><br>

	<label for="predef_box"><input type="checkbox" name="predef_file" value="predef_file" id="predef_box">   Or use predefined input files:</label><br>
	<select name="cancer_type" id="predef_input" size="1">	
	        <option value="1">Lung Cancer</option>
	        <option value="2">Breast Cancer</option>
       	</select><br><br>
	{% if user.is_authenticated %}
	<label for="redo_box"><input type="checkbox" name="redo_analysis" value="redo_analysis" id="redo_box">    Or use own uploaded files</label><br>
	<select name="input_own_file_redo" size="1"style="width:500px">	
		{% for filename2 in list_of_files_2 %}
	        <option value="{{filename2.f2}}">File(s) from: {{filename2.f1}}</option>
		{% endfor %}
       	</select>
	<br><br>
	{% endif %}	
	</div>
	<!--- upload PPI data (step 2) --->
	<div class="tab4" style="width:500px; height:300px" id="ppi_upload">
	<b>Upload file with PPI:</b><br>
	<input class="input" id="protfile_input" type="file" name="protfile"   style="float: left;"> 
	<!--- ndex import (collapsible)--->
	 <div class="wrap-collabsible" style="width:200px; display:inline;" id="ndex_div">
	  <input id="collapsible_2" class="toggle" type="checkbox" style="display:none">
	  <label for="collapsible_2" class="lbl-toggle">OR Import Ndex:</label>
	  <div class="collapsible-content">
	    <div class="content-inner">
	<!--- invisible checkbox that is checked when collapsible is open, and unchecked if closed (used to pass parameter to view) ---> 
	<label for="parse_ndex_file"><input type="checkbox" name="parse_ndex_file" value="parse_ndex_file" id="parse_ndex_file" style="display:none;">Parse Ndex file:</label>

	<br><br><select name="ndex_name_2" id="ndex_name_2" size="1">	
	        <option value="1" selected="selected">APID</option>
	        <option value="2">STRING</option>
	        <option value="3">BioGrid</option>
	        <option value="4">HPRD (Human Protein Reference Database)</option>
		<option value="5">Ulitsky</option>
       		<option value="6">I2D</option>
      	 	<option value="7">BioGrid (C.Elegans)</option>
      	 	<option value="8">BioGrid (A.Thal.)</option>
      	 	<option value="9">BioGrid (Mus Mus.)</option>
      	 	<option value="10">BioGrid (D Mel.)</option>
      	 	<option value="11">BioGrid (E. Coli)</option>
      	 	<option value="12">BioGrid (Sacch. C.)</option>
      	 	<option value="13">BioGrid (Dan.R.)</option>
       	</select><br><br>
<span class="message_1"  style="display:block;">Human interactome extracted from <a href="http://apid.dep.usal.es">APID</a>, only human proteins, no inter-species interactions.</span>
       	<span class="message_2" style="display:none;">PPI from <a href="https://string-db.org/">String Database</a>. This network contains high confidence human protein links. All interactions with Score lower than 0.7 were filtered out.</span>
       	<span class="message_3" style="display:none;">PPI from <a href="https://thebiogrid.org/">BIOGRID</a></span>
	<span class="message_4" style="display:none;">This network belongs to an NDEx Network Set associated with the 2018 Huang and Carlin et al. Cell Systems paper.</span>
	<span class="message_5" style="display:none;">PPI network from Ulitsky et al. 2008</span>
	<span class="message_6" style="display:none;">PPI from the <a href="http://ophid.utoronto.ca/ophidv2.204/">I2D</a> project.</span>
	
</div>
  </div>
</div> <!--- end ndex_div -->
</div> <!--- end PPI upload -->
<!--- js code for PPI data upload --->
<script>
 // Check hidden parse-ndex-file box if the "parse ndex file" collapsible is opened (then the parse-ndex-file parameter will be true in form data)
$('#collapsible_2').change(function () {
    if ($(this).prop('checked')) {
       $('#parse_ndex_file').prop('checked', true);
    } else {
       $('#parse_ndex_file').prop('checked', false);
    }
});
$('#selectall').trigger('change');
</script>
<script>
  // show predefined input files if parse-predefined-files box is checked 
function myFunction3() {
  // Get the checkbox
  var checkBox = document.getElementById("predef_box");
  // Get the output text
  var text = document.getElementById("ppi_upload");
  var text2 = document.getElementById("protfile_input");
  var text3 = document.getElementById("predef_input");
  var text4 = document.getElementById("ndex_div");
  // If the checkbox is checked, display the output text
  if (checkBox.checked == true){
    text.style.display = "none";
    text2.style.display = "none";
    text3.style.display = "block";
    text4.style.display = "none";
  } else {
    text.style.display = "block";
    text2.style.display = "block";
    text3.style.display = "none";
    text4.style.display = "block";
  }
} 
</script>
<script>
// display the import-ndex dropdown after click on label
var coll2 = document.getElementsByClassName("collapsible_2");
var i;

for (i = 0; i < coll2.length; i++) {
  coll2[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.display === "inline") {
      content.style.display = "none";
    } else {
      content.style.display = "inline";
    }
  });
} 
</script>
       	
<script>
// display the information text for selected NDEx files
$(document).ready(function() {

    $('#ndex_name_2').change(function() {

        var selectedValue = $(this).val();

        if ( selectedValue == '1' ) {
            $('.message_1').show();
        } else {
            $('.message_1').hide();
        }
        if ( selectedValue == '2' ) {
            $('.message_2').show();
        } else {
            $('.message_2').hide();
        }
        if ( selectedValue == '3' || selectedValue =='7' || selectedValue =='8' || selectedValue =='9' || selectedValue =='10' || selectedValue =='11' || selectedValue =='12'|| selectedValue =='13' ) {
            $('.message_3').show();
        } else {
            $('.message_3').hide();
        }
	if ( selectedValue == '4' ) {
            $('.message_4').show();
        } else {
            $('.message_4').hide();
        }if ( selectedValue == '5' ) {
            $('.message_5').show();
        } else {
            $('.message_5').hide();
        }if ( selectedValue == '6' ) {
            $('.message_6').show();
        } else {
            $('.message_6').hide();
        }

    });
});
</script>




	<!--- upload metadata (step 3) --->
	<div class="tab4" style="width:500px; height:300px" id="metad_upload">
	<b>This step is optional.</b><br> If you do not want to upload metadata, you can
    	<button type="button" id="nextBtn3" onclick="nextPrev(1)">Go to the next step</button>
	<label for="analyze_metadata"><input type="checkbox" name="analyze_metadata" value="analyze_metadata" id="analyze_metadata">Analyze Patient Metadata</label>
	<br>
	<b>Upload file with Patient Data:</b> <br>
	<input class="input" type="file" name="patientdata"><br> <b>Name of "survival" column:</b> <input class="input" type="text" name="survival_col"><br>
	</div>

	<!--- algorithm parameters (step 4) --->
	<div class="tab4" style="width:500px; height:300px" id="params">

	<h3>Algorithm Parameters</h3>
	<p><b>Enter minimum and maximum number of genes per cluster and run the algorithm:</b></p>
       Minimal:
	<input class="input" type="text" name="L_g_min" id="L_g_min">
	Maximal:
    	<input class="input" type="text" name="L_g_max" id="L_g_max">
	<br>
	Maximum number of iterations:
	<select name="nbr_iter" size="1">	
	        <option value="2">2</option>
	        <option value="5">5</option>
	        <option value="10">10</option>
	        <option value="20">20</option>
	        <option value="45">45</option>
       	</select>
	<!--- collapsible for advanced parameter input --->
	 <div class="wrap-collabsible">
  <input id="collapsible" class="toggle" type="checkbox" style="display:none">
  <label for="collapsible" class="lbl-toggle">Advanced parameters</label>
  <div class="collapsible-content">
    <div class="content-inner">
      <p>
	Gene set size:
	<input class="input" type="text" name="gene_set_size" id="gene_set_size">
	<br>
       Number of ants:
	<select name="nbr_ants" size="1">	
	        <option value="10">10</option>
	        <option value="20">20</option>
	        <option value="30" selected="selected">30</option>
	        <option value="40">40</option>
	        <option value="50">50</option>
       	</select>  
	Evaporation rate:
	<select name="evap" size="1">	
	        <option value="0.1">0.1</option>
	        <option value="0.25">0.25</option>
	        <option value="0.5" selected="selected">0.5</option>
	        <option value="0.6">0.6</option>
	        <option value="0.7">0.7</option>
       	</select><br>
Pheromone significance:
	<select name="pher" size="1">	
	        <option value="0.5">0.5</option>
	        <option value="0.75">0.75</option>
	        <option value="1" selected="selected">1</option>
	        <option value="1.5">1.5</option>
	        <option value="2">2</option>
       	</select>
HI significance:
	<select name="hisig" size="1">	
	        <option value="0.5">0.5</option>
	        <option value="0.75">0.75</option>
	        <option value="1" selected="selected">1</option>
	        <option value="1.5">1.5</option>
	        <option value="2">2</option>
       	</select><br>
Stop criteria: score_max - score_av <
	<select name="stopcr" size="1">	
	        <option value="0.005">0.005</option>
	        <option value="0.01">0.01</option>
	        <option value="0.02" selected="selected">0.02</option>
	        <option value="0.03">0.03</option>
	        <option value="0.05">0.05</option>
       	</select>
	
	</p>
    </div>
  </div>

</div> <!--- end wrap-collapsible -->
	        <input type="submit" value="Submit" onclick="hideAll()" onclick="showProgressTab(0)"/>

	</div> <!-- end params -->
<!--- end of multi-stetp input form --->

<script>
// expand box for data input to fit expanded dropdown menu
$('#collapsible').change(function () {
    if ($(this).prop('checked')) {
    $('#params').css('height','450px');
    $('#input_data_div').css('height','600px');
    } else {
    $('#params').css('height','300px');
    $('#input_data_div').css('height','420px');
    }
});
$('#selectall').trigger('change');
</script>
<!--- the previous-next buttons for the input form. invisible if input form is not open --->
<div style="overflow:auto;position:relative;bottom:80px;">
  <div style="float:right;">
    <button type="button" id="prevBtn2" onclick="showTab3(0)" style="display:none; font-size:24px">Previous</button>
    <button type="button" id="prevBtn" onclick="nextPrev(-1)" style="font-size: 24px;">Previous</button>
    <button type="button" id="nextBtn" onclick="nextPrev(1)" style="font-size: 24px;">Next</button>
    <button type="submit" id="submitBtn" onclick="nextPrev(1)" onclick="hideAll()" onclick="showProgressTab(0)" style="font-size: 24px;">Submit</button>

  </div>
</div>
</div> <!--- input_data_div-->
</div> <!--- wrapper div 4 -->

<!--- the progress-boxes for the input form --->
<div style="text-align:center;margin-top:40px;bottom:50px;clear:both" id="showtabs">
  <span class="step"><a id="myLink" href="#" onclick="showTab2(0);">1.<br>Start new analysis</a></span>
  <span class="step"><a id="myLink" href="#" onclick="showTab2(1);">2.<br>Expression Data</a></span>
  <span class="step"><a id="myLink" href="#" onclick="showTab2(2);">3.<br>PPI<br><br></a></span>
  <span class="step"><a id="myLink" href="#" onclick="showTab2(3);">4.<br>Metadata<br><br></a></span>
  <span class="step"><a id="myLink" href="#" onclick="showTab2(4);">5.<br>Parameters<br><br></a></span>
  <!--- separate step if user has clicked "show old analysis" button --->
  <span class="step2"><a id="myLink" href="#" onclick="showOldAnalysisTab();">Show old analysis<br><br></a></span>
<div style="height:200px">
</div>
</div><!--- showtabs -->
</div><!--- wrapper div 3 -->

<!--- div for showing algorithm progress --->
<div class="tab5" style="width:50%; height:600px;float:left;display:inline;right:400px" id="progress_tab">
<!--- gif with symbol for "page loading" --->
<img src={% static 'loading_1.gif' %} width="100" height="100" alt="">
	<div style="padding:40px;margin:40px;border:1px solid #ccc" style="float:left">
<!--- output text from the console and convergence plot--->
<object width="500" height="75" type="text/plain" data="{% static output_console_file %}" border="0" ><br><br>
</object><br><br><img src={% static progress_file %} width="400" height="400">
	
</div>
</div><!--- progress tab --->
</div><!--- input div 2-->

</form>
<!--- javascript for input verification --->
<script>
// check input data - if old results are displayed, no uploads or parameters are needed
function checkInp()
{
// return true if old results is checked (no additional input parameters needed)
if (document.getElementById('display_old_results').checked){
    return true;
}// check if minimal and maximal number of genes was given
  var x=document.forms["myForm"]["L_g_min"].value;
  if (isNaN(x)) 
  {
    alert("Input for minimal number of genes must be a number");
    return false;
  }
  var y=document.forms["myForm"]["L_g_max"].value;
  if (isNaN(y)) 
  {
    alert("Input for maximal number of genes must be a number");
    return false;
  }  // parseFloat converts input from field L_g_min to float
  var input=parseFloat($('#L_g_min').val(), 2000);
    // check if inputted number is between 0 and 1000
    if (input >= 0 && input <= 1000) {
    } else { 
    alert("Input for minimal number of genes must be between 0 and 1000");
    return false;
    }
  var input2=parseFloat($('#L_g_max').val(), 2000);
    if (input2 >= 0 && input2 <= 1000) {
    } else { 
    alert("Input for maximal number of genes must be between 0 and 1000");
    return false;
    }
}
</script>
<br><br><br><br>
<script>
// display collapsible content if the label is clicked
var coll = document.getElementsByClassName("collapsible");
var i;
// set display property of content to "block" instead of "none" to make it visible
for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.display === "block") {
      content.style.display = "none";
    } else {
      content.style.display = "block";
    }
  });
} 
</script>
       {% load staticfiles %}
</div>
        <!-- /.row -->
        <!-- Feature Row -->

<script>
// optional function to hide the input form when algorithm is running
//$.get("home/quirin/testproject/polls/static/loading_1.gif")
$.get("/static/loading_1.gif")
    .done(function() { 
	//$('#input_data_div').hide();
        // Do something now you know the image exists.

    }).fail(function() { 
	//$('#progress_tab').hide();
        // Image doesn't exist - do something else.

    })
</script>


<script>
// function for display of the result tabs. this function is mostly identical to showTab2() and not used much anymore
var currentTab = 0; // Current tab is set to be the first tab (0) where the user can choose between starting a new run or showing old results
showTab(currentTab); // Display the current tab

function showTab(n) {
  // This function will display the specified tab of the form ...
  var x = document.getElementsByClassName("tab4");
  x[n].style.display = "block";
  // ... and fix the Previous/Next buttons. first page has no previous button etc.
  if (n == 0) {
    document.getElementById("prevBtn").style.display = "none";
  } else {
    document.getElementById("prevBtn").style.display = "inline";
  }
  // last tab has no next button
  if (n == (x.length - 1)) {
    document.getElementById("nextBtn").style.display = "none";
    document.getElementById("submitBtn").style.display = "inline";
  } else {
    document.getElementById("nextBtn").style.display = "inline";
    document.getElementById("nextBtn").innerHTML = "Next";
    document.getElementById("submitBtn").style.display = "none";
  }
  // no next and submit button on page 0 (where the user can choose between starting a new run or showing old results)
 if (n == 0) {
    document.getElementById("nextBtn").style.display = "none";
    document.getElementById("submitBtn").style.display = "none";
  }
if (n == 1) {
    document.getElementById("prevBtn").style.display = "none";
    document.getElementById("submitBtn").style.display = "none";
  }
  // ... and run a function that displays the correct step indicator:
  fixStepIndicator(n)
if (n == 5) {
    document.getElementById("prevBtn").style.display = "none";
   document.getElementById("nextBtn").style.display = "none";
    document.getElementById("submitBtn").style.display = "none";
    document.getElementById("showtabs").style.display = "none";
 } else {
  }
if (n == 0) {
  }
// hide the display-old-data tab if the user has selected "run new analysis"
var y = document.getElementsByClassName("tab6");
for (i = 0; i < y.length; i++) {
  y[i].style.display = "none";
  }
}

function showTab2(n) {
  // This function will display the specified tab of the form ...
  var x = document.getElementsByClassName("tab4");

  // ... and fix the Previous/Next buttons. no previous button on first page etc.
  if (n == 0) {
    document.getElementById("prevBtn").style.display = "none";
  } else {
    document.getElementById("prevBtn").style.display = "inline";
  }
  if (n == (x.length - 1)) {

    document.getElementById("nextBtn").style.display = "none";
    document.getElementById("submitBtn").style.display = "inline";
  } else {

    document.getElementById("nextBtn").style.display = "inline";
    document.getElementById("nextBtn").innerHTML = "Next";
    document.getElementById("submitBtn").style.display = "none";
  }
if (n == 1) {
    document.getElementById("prevBtn").style.display = "none";
    document.getElementById("submitBtn").style.display = "none";
    document.getElementsByClassName("step")[0].className += " finish";
  }
 if (n == 0) {
    document.getElementById("nextBtn").style.display = "none";
  }
  // ... and run a function that displays the correct step indicator:
  fixStepIndicator(n)
  for (i = 0; i < x.length; i++) {
    x[i].style.display = "none";
  }
  x[n].style.display = "block";

  currentTab = n;
if (n == 5) {
 } else {

  }
// hide the display-old-data tab if the user has selected "run new analysis"
var y = document.getElementsByClassName("tab6");
for (i = 0; i < y.length; i++) {
  y[i].style.display = "none";
  }

}


function showTab3(n) {
  // show the overview tab if you click previous on the first input step
  var x = document.getElementsByClassName("tab4");
  // ... and fix the Previous/Next buttons:
  if (n == 0) {
    document.getElementById("prevBtn").style.display = "none";
  } else {
    document.getElementById("prevBtn").style.display = "inline";
  }
  if (n == (x.length - 1)) {
    //document.getElementById("nextBtn").innerHTML = "Submit";
    document.getElementById("nextBtn").style.display = "none";
    document.getElementById("submitBtn").style.display = "inline";
  } else {
    //document.getElementById("nextBtn").innerHTML = "Next";
    document.getElementById("nextBtn").style.display = "inline";
    document.getElementById("nextBtn").innerHTML = "Next";
    document.getElementById("submitBtn").style.display = "none";
  }
if (n == 1) {
    document.getElementById("prevBtn").style.display = "none";
    document.getElementById("submitBtn").style.display = "none";
  }
 if (n == 0) {
    document.getElementById("nextBtn").style.display = "none";
  }
  // ... and run a function that displays the correct step indicator:
  fixStepIndicator(n)
  for (i = 0; i < x.length; i++) {
    x[i].style.display = "none";
  }
  x[n].style.display = "block";

    document.getElementById("prevBtn2").style.display = "none";

  currentTab = n;
if (n == 5) {
 } else {

  }
// hide the display-old-data tab if the user has selected "run new analysis"
var y = document.getElementsByClassName("tab6");
for (i = 0; i < y.length; i++) {
  y[i].style.display = "none";
  }

  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {

    x[i].style.display = "inline-block";
  }
  //... and adds the "active" class to the current step:
  var j,y = document.getElementsByClassName("step2");

  y[0].style.display = "none";
}



function showOldAnalysisTab() {
  // Show the tab to run an old analysis
  var x = document.getElementsByClassName("tab4");

  // ... and fix the Previous/Next buttons:
    document.getElementById("prevBtn").style.display = "none";
    document.getElementById("submitBtn").style.display = "inline";

    document.getElementById("nextBtn").style.display = "none";
    document.getElementById("prevBtn2").style.display = "inline";
 for (i = 0; i < x.length; i++) {
    x[i].style.display = "none";
  }
  var y = document.getElementsByClassName("tab6");
for (i = 0; i < y.length; i++) {
  y[i].style.display = "block";
  }
oldAnalysisStepIndicator()

}



function oldAnalysisStepIndicator() {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
    x[i].style.display = "none";
  }
  //... and adds the "active" class to the current step:
  var j,y = document.getElementsByClassName("step2");
  y[0].className += " active";
  y[0].style.display = "inline-block";
}



function showProgressTab(n) {
  // function to show the progress tab with progress plot after the user has clicked submit
  var x = document.getElementsByClassName("tab5");
  x[n].style.display = "block";

  // ... and fix the Previous/Next buttons:
  var y = document.getElementsByClassName("tab4");

    document.getElementById("prevBtn").style.display = "none";
    document.getElementById("showtabs").style.display = "none";
    document.getElementById("nextBtn").style.display = "none";
  
  for (i = 0; i < y.length; i++) {
    y[i].style.display = "none";
    y[i].className = y[i].className.replace(" finish", "");
  }

    document.getElementById("progress_tab").style.display = "block";
  currentTab = 4;

}



function hideAll() {
  // Hide all input tabs, activated after clicking the submit button
  var x = document.getElementsByClassName("tab4");


  // show no previous/next buttons, and hide the start-new analysis button
    document.getElementById("prevBtn").style.display = "none";
    document.getElementById("showtabs").style.display = "none";
	//document.getElementById("start_new_analysis").style = "width:0px";
	//document.getElementById("start_new_analysis_wrapper").style = "width:0px";
   document.getElementById("nextBtn").style.display = "none";
 for (i = 0; i < x.length; i++) {
    x[i].style.display = "none";
  }
 }

function nextPrev(n) {
  // This function will figure out which tab to display
  var x = document.getElementsByClassName("tab4");
  // Hide the current tab:
  x[currentTab].style.display = "none";
  // Increase or decrease the current tab by 1:
  currentTab = currentTab + n;
  // if you have reached the end of the form... :
  if (currentTab >= x.length) {
    return false;
  }
  //hide the first step (where you select run new analysis or show old results)
  var j,y = document.getElementsByClassName("step2");
  y[0].style.display = "none";
// remove the "start a new analysis" button when clicking next on step 1
if(currentTab==1){
if(n==1){
    document.getElementsByClassName("step")[0].className += " finish";
    document.getElementById('start_new_analysis_wrapper').display = "none";
}
}
// if you are on the expression file input tab, check if the user has uploaded something or selected a predefined file
if (currentTab == 2) {
if (n == 1) {
if(document.getElementById('myfile_input').value=='' && (document.getElementById('predef_box').checked === false ) && (document.getElementById('redo_box').checked === false )){
   // give warning if user has not uploaded anything
    alert("Please input file with expression data");
  // and stay on the same tab instead of going to the next
  currentTab = currentTab -1;
  //showTab(currentTab);
}
}
}

if (currentTab == 3) {
if (n == 1) {
// no protein file needed if user has selected own old data
if(document.getElementById('protfile_input').value=='' && (document.getElementById('parse_ndex_file').checked === false) && (document.getElementById('redo_box').checked === false)){

    alert("Please input file with PPI data");

  currentTab = currentTab -1;

}
}
}
// if you click the "next" button, set the label style for the previous step to "done"
if(n==1){
    document.getElementsByClassName("step")[currentTab-1].className += " finish";
}

  // Otherwise, display the correct tab:
  showTab(currentTab);
}

function fixStepIndicator(n) {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  //... and adds the "active" class to the current step:
  x[n].className += " active";
}
</script>

</div>

<!--- openTab is for choosing and displaying result tabs --->
<div id="results" style="clear:both;">

</div>
    </div>
    </div>
    <!-- /.container -->

</div>  
</div>
</div>

<script type="text/javascript"> <![CDATA[
        function loading(){
            $("#loading").show();      
        }
 ]]></script>
       {% load staticfiles %}

{%  if enrichment_open  %}
    <script>var js_enrichment_open = true; </script>
{% else %}
      <script>var js_enrichment_open = false; </script>
{% endif %}

</body>
	<footer style="clear:both">
		<div class="footer-blurb" style="display:none">
			<div class="container">
				
			</div>
        </div>
        
        <div class="small-print">
        	<div class="container">
        		<p><a href="#">Terms &amp; Conditions</a> | <a href="#">Privacy Policy</a> | <a href="#">Contact</a></p>
        		<p>Copyright &copy; Example.com 2015 </p>
        	</div>
        </div>
	</footer>

	
    <!-- jQuery -->
    <!-- <script src="{% static 'jquery-1.11.3.min.js'%}"></script> -->

    <!-- Bootstrap Core JavaScript -->
    <script src="{%static 'bootstrap.min.js'%}"></script>
	
	<!-- IE10 viewport bug workaround -->
	<script src="{%static 'ie10-viewport-bug-workaround.js'%}"></script>
	
	<!-- Placeholder Images -->
	<script src="{%static 'holder.min.js'%}"></script>
	

</html>


